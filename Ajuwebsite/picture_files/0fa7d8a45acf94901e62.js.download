(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{7075:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldAnimateSticker=t.createStickerPackCategory=t.getPaymentFlowAnalyticsDataForStickerPack=t.getStickerPackPriceLabel=t.isStickerPackFreeForPremiumType=t.getPriceForStickerPack=t.isStickerPackLimitedTimeExclusive=t.isStickerPackPremiumExclusive=t.isStickerPackAnimated=t.searchUnownedStickers=t.searchOwnedStickers=t.searchAllStickers=t.isStickerAssetUrl=t.getStickerAssetUrl=t.getStickerExtensionFromFormatType=t.getStickerPackPreviewSticker=void 0;var n=d(r(860)),i=d(r(7098)),a=r(294),u=d(r(116)),o=r(216),l=r(872),c=r(7093),s=r(1),f=d(r(6));function d(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var v=window.GLOBAL_ENV,E=v.API_ENDPOINT,y=v.MEDIA_PROXY_ENDPOINT,_=v.PROJECT_ENV,S=v.ASSET_ENDPOINT,g=Object.values(c.StickerExtensions),h=decodeURIComponent(s.Endpoints.STICKER_ASSET("[\\d]+","[a-f\\d]{32}","("+g.join("|")+")")),m=new RegExp("("+S+"|"+y+")("+h+")","ig"),A=new RegExp(""+location.protocol+E+"("+h+")","ig"),T=function(e){if(null!=e.cover_sticker_id){var t=e.stickers.find((function(t){return t.id===e.cover_sticker_id}));if(null!=t)return t}return e.stickers[0]};t.getStickerPackPreviewSticker=T;var k=function(e){switch(e){case c.StickerFormat.PNG:return c.StickerExtensions.PNG;case c.StickerFormat.APNG:return c.StickerExtensions.APNG;case c.StickerFormat.LOTTIE:return c.StickerExtensions.LOTTIE;default:throw new Error("Unexpected format type: "+e)}};t.getStickerExtensionFromFormatType=k;t.getStickerAssetUrl=function(e,t){var r=void 0===t?{}:t,n=r.isPreview,i=void 0!==n&&n,u=r.size,o=void 0===u?l.DEFAULT_STICKER_DIMENSIONS:u;if(null==e.format_type||null==e.asset)return null;var f=k(e.format_type);if("development"!==_){if(e.format_type===c.StickerFormat.LOTTIE)return""+S+s.Endpoints.STICKER_ASSET(e.id,e.asset,f);var d=e.format_type===c.StickerFormat.APNG&&i?"&passthrough=false":"";return""+y+s.Endpoints.STICKER_ASSET(e.id,e.asset,f)+"?size="+(0,a.calculateSize)(o)+d}return""+location.protocol+E+s.Endpoints.STICKER_ASSET(e.id,e.asset,f)};t.isStickerAssetUrl=function(e){return e.match("development"!==_?m:A)};t.searchAllStickers=function(e){return i.default.queryStickers(e,!0).stickers.map((function(e){return e.sticker}))};t.searchOwnedStickers=function(e){return i.default.queryStickers(e,!0,(function(e,t){return t})).stickers.map((function(e){return e.sticker}))};t.searchUnownedStickers=function(e){return i.default.queryStickers(e,!0,(function(e,t){return!t})).stickers.map((function(e){return e.sticker}))};t.isStickerPackAnimated=function(e){return e.stickers.some((function(e){var t=e.format_type;return t===c.StickerFormat.APNG||t===c.StickerFormat.LOTTIE}))};var P=function(e){var t,r;return!0===(null===(t=e.store_listing)||void 0===t||null===(r=t.sku)||void 0===r?void 0:r.premium)};t.isStickerPackPremiumExclusive=P;t.isStickerPackLimitedTimeExclusive=function(e){var t;return null!=(null===(t=e.store_listing)||void 0===t?void 0:t.unpublished_at)};var L=function(e,t){var r,i,a=null===(r=e.store_listing)||void 0===r?void 0:r.sku;return null==a?null:null===(i=n.default.createFromServer(a))||void 0===i?void 0:i.getPrice(t,!1)};t.getPriceForStickerPack=L;var C=function(e,t){var r,n;return null!=(null===(r=e.store_listing)||void 0===r?void 0:r.sku)&&(!(!P(e)||!u.default.isPremiumAtLeast(t,s.PremiumTypes.TIER_2))||0===(null===(n=L(e,t))||void 0===n?void 0:n.amount))};t.isStickerPackFreeForPremiumType=C;t.getStickerPackPriceLabel=function(e,t,r,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=!1),n&&r!==s.PremiumTypes.NONE){var a=L(e,s.PremiumTypes.NONE),u=L(e,r);if(null!=a&&null!=u&&a.amount!==u.amount){var l=(0,o.formatPrice)(a.amount,a.currency);if(0===u.amount)return f.default.Messages.STICKER_PICKER_DISCOUNTED_FREE.format({regularPrice:l,strikethroughHook:t});var c=(0,o.formatPrice)(u.amount,u.currency);return f.default.Messages.STICKER_PICKER_DISCOUNTED_PRICE.format({regularPrice:l,discountedPrice:c,strikethroughHook:t})}}if(C(e,r))return f.default.Messages.STICKER_PACK_PRICE_FREE;if(P(e))return f.default.Messages.STICKER_PACK_PRICE_FREE_WITH_PREMIUM_TIER_2;if(n){if(C(e,s.PremiumTypes.TIER_1)&&r!==s.PremiumTypes.TIER_1)return f.default.Messages.STICKER_PACK_PRICE_FREE_WITH_PREMIUM_TIER_1;if(C(e,s.PremiumTypes.TIER_2)&&r!==s.PremiumTypes.TIER_2)return f.default.Messages.STICKER_PACK_PRICE_FREE_WITH_PREMIUM_TIER_2}var d=n?s.PremiumTypes.TIER_2:r,p=L(e,d);if(null!=p){var v=(0,o.formatPrice)(p.amount,p.currency);return d===r?i?f.default.Messages.STICKER_PICKER_PRICE.format({price:v}):v:f.default.Messages.STICKER_PICKER_PRICE_WITH_PREMIUM_TIER_2.format({price:v})}return f.default.Messages.STICKER_PICKER_PRICE_UNKNOWN};t.getPaymentFlowAnalyticsDataForStickerPack=function(e,t){var r;void 0===t&&(t=null);var n={};if(null!=(null==e||null===(r=e.store_listing)||void 0===r?void 0:r.sku)){var i,a=e.store_listing.sku;n={sku_id:a.id,sku_type:a.type,application_id:a.application_id,store_title:a.name,regular_price:null===(i=a.price)||void 0===i?void 0:i.amount}}var u=null!=t?L(e,t):null;return p({},n,{},null!=t&&null!=u?{price:null==u?void 0:u.amount,currency:null==u?void 0:u.currency}:null,{payment_type:"sticker"})};t.createStickerPackCategory=function(e){return{type:c.StickerCategoryTypes.PACK,id:e.id,name:e.name,stickers:e.stickers,previewSticker:T(e)}};t.shouldAnimateSticker=function(e,t,r){return e||t===l.StickerAnimationSettings.ANIMATE_ON_INTERACTION?r:t!==l.StickerAnimationSettings.NEVER_ANIMATE}},7090:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(r(5)),i=u(r(3)),a=r(7472);r(1);function u(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var f=new Map,d=new Map,p=new Map,v=[],E=new Set,y=[],_=!1,S=!1,g=!1,h=!1,m=!1,A=!1,T=null,k=function(e,t){var r=(void 0===t?{}:t).overwrite,n=void 0!==r&&r,i=n?e:s({},f.get(e.id),{},e);f.set(e.id,i),e.stickers.forEach((function(e){var t=n?e:s({},d.get(e.id),{},e);d.set(e.id,t);var r=e.tags;null!=r&&p.set(e.id,r.split(",").map((function(e){return e.trim().toLocaleLowerCase()})))}))},P=function(){v=[],f.forEach((function(e){return v.push(e)}))};var L=new(function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i,a,u,l=n.prototype;return l.hasFetchedShopStickerPacks=function(e){var t=(void 0===e?{}:e).withStoreListings;return m||!(void 0!==t&&t)&&h},l.isFetchingShopStickerPacks=function(e){var t=(void 0===e?{}:e).withStoreListings;return S||!(void 0!==t&&t)&&_},l.getStickerById=function(e){return d.get(e)},l.getStickerPack=function(e){return f.get(e)},l.ownsStickerPack=function(e){return E.has(e)},i=n,(a=[{key:"hasFetchedUserStickerPacks",get:function(){return A}},{key:"isFetchingUserStickerPacks",get:function(){return g}},{key:"shopStickerPackIds",get:function(){return y}},{key:"userStickerPackIds",get:function(){return E}},{key:"stickerTagData",get:function(){return p}},{key:"scrollToPackId",get:function(){return T}},{key:"ownsAnyStickerPack",get:function(){return E.size>0}}])&&o(i.prototype,a),u&&o(i,u),n}(n.default.Store))(i.default,{STICKER_PACK_FETCH_SUCCESS:function(e){var t=e.pack;k(t),P()},SHOP_STICKER_PACKS_FETCH_START:function(e){var t=e.withStoreListings;_=!0,t&&(S=!0)},SHOP_STICKER_PACKS_FETCH_SUCCESS:function(e){var t=e.packs,r=e.withStoreListings,n=[];t.forEach((function(e){(0,a.isPackAvailableForPurchase)(e)&&n.push(e.id),k(e,{overwrite:r})})),y=n,P(),_=!1,h=!0,r&&(S=!1,m=!0)},USER_STICKER_PACKS_FETCH_SUCCESS:function(e){for(var t,r=[],n=l(e.userPacks);!(t=n()).done;){var i=t.value;r.push(i.pack_id),null!=i.sticker_pack&&k(i.sticker_pack)}E=new Set(r),P(),g=!1,A=!0},USER_STICKER_PACKS_FETCH_START:function(e){g=!0},USER_STICKER_PACK_UPDATE:function(e){var t=e.packId;E.add(t),E=new Set(E)},USER_STICKER_PACK_SCROLL_TO_PACK_ID:function(e){var t=e.packId;T=t},LOGOUT:function(e){return A=!1,E=new Set,p.clear(),void(p=new Map)}});t.default=L},7093:function(e,t,r){"use strict";var n,i,a,u;Object.defineProperty(t,"__esModule",{value:!0}),t.StickerCategoryTypes=t.StickerGridItemTypes=t.StickerExtensions=t.StickerFormat=void 0,t.StickerFormat=n,function(e){e[e.PNG=1]="PNG",e[e.APNG=2]="APNG",e[e.LOTTIE=3]="LOTTIE"}(n||(t.StickerFormat=n={})),t.StickerExtensions=i,function(e){e.PNG="png",e.APNG="png",e.LOTTIE="json"}(i||(t.StickerExtensions=i={})),t.StickerGridItemTypes=a,function(e){e[e.STICKER=0]="STICKER",e[e.VIEW_ALL=1]="VIEW_ALL"}(a||(t.StickerGridItemTypes=a={})),t.StickerCategoryTypes=u,function(e){e.PACK="PACK",e.RECENT="RECENT",e.SEARCH_RESULTS="SEARCH_RESULTS",e.SEARCH_SUGGESTIONS="SEARCH_SUGGESTIONS",e.STORE="STORE"}(u||(t.StickerCategoryTypes=u={}))},7098:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.WHITESPACE_REGEX=void 0;var n=O(r(5056)),i=O(r(7)),a=O(r(108)),u=O(r(7297)),o=O(r(341)),l=O(r(24)),c=O(r(7090)),s=r(85),f=O(r(147)),d=O(r(29)),p=O(r(330)),v=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=N();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e,t&&t.set(e,r);return r}(r(197)),E=O(r(100)),y=O(r(34)),_=O(r(795)),S=O(r(99)),g=O(r(280)),h=O(r(279)),m=O(r(98)),A=O(r(271)),T=O(r(25)),k=O(r(343)),P=O(r(1372)),L=r(107),C=O(r(7206)),I=O(r(273)),b=O(r(350)),R=r(146),w=r(1);function N(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return N=function(){return e},e}function O(e){return e&&e.__esModule?e:{default:e}}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function U(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=new l.default("AutocompleteUtils"),F=function(){return!0},K=/(\t|\s)/;t.WHITESPACE_REGEX=K;var j,x=[],H=(j=r(7864).default).MENTION_EVERYONE,q=j.MENTION_HERE,V=j.LAUNCHABLE_APPLICATIONS;function B(e,t,r,i,a){void 0===a&&(a=!0);try{if(t.test(e))return 10}catch(e){D.error(e)}try{if(r.test(e))return 5}catch(e){D.error(e)}return a&&(0,n.default)(i,e)?1:0}function W(e,t,r,i){for(var a=T.default.getUsers(),o=A.default.getGuildId(),l=e.toLocaleLowerCase(),c=l.length,s=[],d=[],p=t.length,v=0,y=0;v<p;){var _=t[v],S=void 0,g=void 0;if(_ instanceof f.default?(g=_,S=E.default.getNick(o,g.id)):(S=_.nick,g=a[_.userId]),!i||i(g)){var h=g.usernameNormalized,m=null!=S?(0,R.stripDiacritics)(S.toLocaleLowerCase()):null;h.substr(0,c)===l||m&&m.substr(0,c)===l?s.push({comparator:m||h,score:10,nick:S,user:g}):y<50&&((0,n.default)(l,h)||m&&(0,n.default)(l,m))&&(d.push({comparator:m||h,score:1,nick:S,user:g}),y+=1)}v+=1}return s.sort(u.default),s.length<r&&(d.sort(u.default),s=s.concat(d.slice(0,Math.max(0,r-s.length)))),s.length>r&&(s.length=r),s}function Y(e,t,r){for(var n,i=0,a=null,u=U(t);!(n=u()).done;){var o=n.value,l=B(e,o.exactQuery,o.containQuery,o.queryLower,r);l>i&&(i=l,a=o)}return null!=a&&(a.isFullMatch?t.length=0:t.splice(t.indexOf(a),1)),i}function X(e,t){var r=d.default.getChannel(e);return null==e||null==r?[]:(0,i.default)(_.default.getMessages(e).toArray()).reverse().map((function(e){return e.author})).reject((function(e){return e.isNonUserBot()})).uniqBy((function(e){return e.id})).map((function(e){var t=r.getGuildId(),n=null!=t&&E.default.getMember(t,e.id)||{};return{nick:n.nick||null,score:0,comparator:n.nick||e.username,user:e}})).take(t).value()}var Q={queryFriends:function(e,t,r,n){return void 0===t&&(t=10),void 0===r&&(r=!0),W(e,h.default.getFriendIDs().map((function(e){return T.default.getUser(e)})).filter(L.isNotNullish),t,n)},queryDMUsers:function(e,t,r,n){return void 0===t&&(t=10),void 0===r&&(r=!0),W(e,d.default.getDMUserIds().map((function(e){return T.default.getUser(e)})).filter(L.isNotNullish),t,n)},queryChannelUsers:function(e,t,r,n){void 0===r&&(r=10),void 0===n&&(n=!0);var i,a=d.default.getChannel(e);if(null==a)return[];if(a.isPrivate()){i=a.recipients.map((function(e){return{userId:e,nick:null!=a.nicks&&a.nicks[e]||null}}));var u=T.default.getCurrentUser();i.push({userId:u.id,nick:null!=a.nicks&&a.nicks[u.id]||null})}else if(0===t.length){var o=X(a.id,r);if(null!=o&&o.length>0)return o;i=E.default.getMembers(a.guild_id)}else i=E.default.getMembers(a.guild_id),n&&C.default.requestMembers(a.guild_id,t,r);return W(t,i,r,(function(e){return a.isPrivate()||I.default.can(w.Permissions.VIEW_CHANNEL,e,a)}))},queryGuildUsers:function(e,t,r,n,i){if(void 0===r&&(r=10),void 0===n&&(n=!0),null==y.default.getGuild(e))return[];if(0===t.length)return X(m.default.getChannelId(e),r);var a=E.default.getMembers(e);return n&&t.length>0&&C.default.requestMembers(e,t,r),W(t,a,r,i)},queryUsers:function(e,t,r,n,a){return void 0===t&&(t=10),void 0===r&&(r=!0),void 0===n&&(n=!0),n&&e.length>0&&C.default.requestMembers(null,e,t),W(e,(0,i.default)(T.default.getUsers()).values().value(),t,a)},queryChannels:function(e,t,r,n,l,c){void 0===r&&(r=10),void 0===n&&(n=!0),void 0===l&&(l=F),void 0===c&&(c=v.GUILD_SELECTABLE_CHANNELS_KEY);var f=function(e){var t=e.split(" ").filter((function(e){return""!==e})).map((function(e){var t=e.toLocaleLowerCase();return{queryLower:t,exactQuery:new RegExp("^"+b.default.escape(t),"i"),containQuery:new RegExp(b.default.escape(t),"i"),isFullMatch:!1}}));if(e.includes(" ")){var r=e.toLocaleLowerCase();t.unshift({queryLower:r,exactQuery:new RegExp("^"+b.default.escape(r),"i"),containQuery:new RegExp(b.default.escape(r),"i"),isFullMatch:!0})}return t}(e);return(t?(0,i.default)(v.default.getChannels(t)[c]).map((function(e){return e.channel})):(0,i.default)(d.default.getPrivateChannels()).values().concat(i.default.values(d.default.getGuildChannels()))).map((function(e){var t,r;if(c!==e.type&&(c!==v.GUILD_SELECTABLE_CHANNELS_KEY||!(0,s.isGuildSelectableChannelType)(e.type))||(0,s.isGuildSelectableChannelType)(e.type)&&!S.default.can(w.Permissions.VIEW_CHANNEL,e)||c===w.ChannelTypes.GUILD_VOICE&&!S.default.can(a.default.combine(w.Permissions.VIEW_CHANNEL,w.Permissions.CONNECT),e)||!l(e))return null;var i=[].concat(f),u=Y(e.name.toLocaleLowerCase(),i,n);return 0===u?null:([null===(t=y.default.getGuild(e.guild_id))||void 0===t?void 0:t.toString().toLocaleLowerCase(),null===(r=d.default.getChannel(e.parent_id))||void 0===r?void 0:r.name.toLocaleLowerCase(),e.name.toLocaleLowerCase()].forEach((function(e){if(null==e||""===e)return null;var t=Y(e,i,!1);0!==t&&(u+=.5*t)})),1===i.length&&i[0].isFullMatch&&(i.length=0),u>0&&0===i.length?{channel:e,score:u,comparator:(0,o.default)(e)}:null)})).filter(L.isNotNullish).sortBy((function(e){return e.channel.name})).sort(u.default).take(r).value()},queryGuilds:function(e,t,r,n){void 0===t&&(t=10),void 0===r&&(r=!0),void 0===n&&(n=F);var a=e.toLocaleLowerCase(),o=new RegExp("^"+b.default.escape(a),"i"),l=new RegExp(b.default.escape(a),"i");return(0,i.default)(y.default.getGuilds()).values().map((function(e){if(n(e)){var t=B(e.name.toLocaleLowerCase(),o,l,a,r);if(t>0)return{guild:e,score:t,comparator:e.toString()}}return null})).filter(L.isNotNullish).sortBy((function(e){return e.guild.name})).sort(u.default).take(t).value()},queryGroupDMs:function(e,t,r,n){void 0===t&&(t=10),void 0===r&&(r=!0),void 0===n&&(n=F);var a=e.toLocaleLowerCase(),l=new RegExp("^"+b.default.escape(a),"i"),c=new RegExp(b.default.escape(a),"i"),s=P.default.getPrivateChannelIds(),f=d.default.getPrivateChannels();return(0,i.default)(s).map((function(e){return f[e]})).map((function(e){if(!e.isMultiUserDM()||!n(e))return null;var t=B((0,o.default)(e).toLocaleLowerCase(),l,c,a,r);return t>0?{channel:e,score:t,comparator:(0,o.default)(e)}:null})).filter(L.isNotNullish).sort(u.default).value()},queryApplications:function(e,t,r,n){void 0===t&&(t=10),void 0===r&&(r=!0),void 0===n&&(n=F);var a=e.toLocaleLowerCase(),o=new RegExp("^"+b.default.escape(a),"i"),l=new RegExp(b.default.escape(a),"i"),c=V();return(0,i.default)(c).map((function(e){var t=e.application;if(n(t)){var i=t.name.toLocaleLowerCase(),u=B(i,o,l,a,r);if(u>0)return{application:t,score:u,comparator:i}}return null})).filter(L.isNotNullish).sort(u.default).take(t).value()},querySKUs:function(e,t,r,n){void 0===t&&(t=10),void 0===r&&(r=!0),void 0===n&&(n=F);var a=e.toLocaleLowerCase(),o=new RegExp("^"+b.default.escape(a),"i"),l=new RegExp(b.default.escape(a),"i"),c=k.default.getSKUs();return(0,i.default)(c).values().map((function(e){if(e.type===w.SKUTypes.DURABLE_PRIMARY&&n(e)){var t=e.name.toLocaleLowerCase(),i=B(t,o,l,a,r);if(i>0)return{sku:e,score:i,comparator:t}}return null})).filter(L.isNotNullish).sort(u.default).take(t).value()},getRecentlyTalked:X,queryMentionResults:function(e,t,r,a,u,o){void 0===r&&(r=!1),void 0===a&&(a=!0),void 0===u&&(u=!0),void 0===o&&(o=!1);var l=a?this.queryChannelUsers(t.id,e).map((function(e){return M({},e,{status:g.default.getStatus(e.user.id)})})):[],c=l.length,s=[];if(c<w.MAX_AUTOCOMPLETE_RESULTS&&u){var f=t.getGuildId(),d=y.default.getGuild(f);null!=d&&((0,i.default)(d.roles).filter((function(t){var i=t.mentionable,a=t.name,u=t.id;return(i||r||o)&&(0,n.default)(e,a.toLowerCase())&&u!==f})).take(w.MAX_AUTOCOMPLETE_RESULTS-c).forEach((function(e){s.push(e)})),c+=s.length)}var p=[];return!t.isPrivate()&&r&&u&&(c<w.MAX_AUTOCOMPLETE_RESULTS&&(0,n.default)(e,H().test)&&(p.push(H()),c+=1),c<w.MAX_AUTOCOMPLETE_RESULTS&&(0,n.default)(e,q().test)&&p.push(q())),{users:l,globals:p,roles:s}},queryGuildMentionResults:function(e,t,r,a,u,o){void 0===r&&(r=!1),void 0===a&&(a=!0),void 0===u&&(u=!0),void 0===o&&(o=!1);var l=a?this.queryGuildUsers(t,e).map((function(e){return M({},e,{status:g.default.getStatus(e.user.id)})})):[],c=l.length,s=[];if(c<w.MAX_AUTOCOMPLETE_RESULTS&&u){var f=y.default.getGuild(t);null!=f&&((0,i.default)(f.roles).filter((function(i){var a=i.mentionable,u=i.name,l=i.id;return(a||r||o)&&(0,n.default)(e,u.toLowerCase())&&l!==t})).take(w.MAX_AUTOCOMPLETE_RESULTS-c).forEach((function(e){s.push(e)})),c+=s.length)}var d=[];return r&&u&&(c<w.MAX_AUTOCOMPLETE_RESULTS&&(0,n.default)(e,H().test)&&(d.push(H()),c+=1),c<w.MAX_AUTOCOMPLETE_RESULTS&&(0,n.default)(e,q().test)&&d.push(q())),{users:l,globals:d,roles:s}},queryChoice:function(e,t,r,n){void 0===r&&(r=10),void 0===n&&(n=!0);var a=e.toLocaleLowerCase(),o=new RegExp("^"+b.default.escape(a),"i"),l=new RegExp(b.default.escape(a),"i");return(0,i.default)(t).map((function(e){var t=B(e.value.toLocaleLowerCase(),o,l,a,n);return t>0?{choice:e,score:t,comparator:e.value}:null})).filter(L.isNotNullish).sortBy((function(e){return e.choice.value})).sort(u.default).take(r).value()},queryChannelResults:function(e,t){return{channels:this.queryChannels(e,t.getGuildId()).map((function(e){return e.channel}))}},queryChoiceResults:function(e,t){return{choices:this.queryChoice(e,t).map((function(e){return e.choice}))}},queryEmojiResults:function(e,t,r){return{emojis:p.default.search(t,e,w.MAX_AUTOCOMPLETE_RESULTS,r)}},queryStickers:function(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=F);var n=c.default.stickerTagData,a=e.toLocaleLowerCase(),u=x;return(""===a||0===(u=(0,i.default)(Array.from(n)).map((function(e){var n=e[0],i=e[1],u=0,o=null,l=c.default.getStickerById(n);if(null==l||!r(l,c.default.ownsStickerPack(l.pack_id)))return null;for(var s,f=U(i);!(s=f()).done;){var d=s.value;if(t){var p=(0,R.stripDiacritics)(a),v=B(d,new RegExp("^"+b.default.escape(p),"i"),new RegExp(b.default.escape(p),"i"),p,!1);v>u&&(u=v,o=d)}else d===a&&(u=10,o=d)}return u>0&&null!=o?{sticker:l,comparator:o,score:u}:null})).filter(L.isNotNullish).sortBy((function(e){return-1*e.score})).value()).length)&&(u=x),{stickers:u}},matchSentinel:function(e,t,r){return!K.test(t)&&e===r}};t.default=Q},7153:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(r(5)),i=u(r(3)),a=r(1);function u(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=new Set,c={};function s(e){var t=e.applicationId;l.add(t)}function f(e){var t=e.applicationId;l.delete(t)}var d=new(function(e){var t,r,n,u,s;function f(){return e.apply(this,arguments)||this}return r=e,(t=f).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,f.prototype.isLaunchable=function(e){return null!=c[e]?c[e]:(c[e]=!1,i.default.dirtyDispatch({type:a.ActionTypes.CHECK_LAUNCHABLE_GAME,gameId:e}),!1)},n=f,(u=[{key:"launchingGames",get:function(){return l}},{key:"launchableGames",get:function(){return c}}])&&o(n.prototype,u),s&&o(n,s),f}(n.default.Store))(i.default,{GAME_LAUNCHABLE_UPDATE:function(e){var t=e.gameId,r=e.isLaunchable;c[t]=r},GAME_CLOUD_SYNC_START:s,GAME_LAUNCH_START:s,GAME_LAUNCH_SUCCESS:f,GAME_LAUNCH_FAIL:f,GAME_CLOUD_SYNC_CONFLICT:f,GAME_CLOUD_SYNC_ERROR:f,GAME_CLOUD_SYNC_COMPLETE:f});t.default=d},7206:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(7)),i=o(r(883)),a=o(r(1407)),u=o(r(34));function o(e){return e&&e.__esModule?e:{default:e}}var l,c=new i.default({maxAge:6e4});var s={requestMembers:function(e,t,r){void 0===r&&(r=10);var i=(e||"")+":"+t;null==c.get(i)&&(c.set(i,!0),function(e,t,r){null!=l&&clearTimeout(l),l=setTimeout((function(){var i=[],o=function(e){i.push(e.id)};if(null==e)n.default.forEach(u.default.getGuilds(),o);else{var l=u.default.getGuild(e);null!=l&&o(l)}i.length>0&&a.default.requestMembers(i,t.toLocaleLowerCase(),r)}),200)}(e,t,r))}};t.default=s},7297:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.score===t.score){var r=(e.comparator||"").toLocaleLowerCase(),n=(t.comparator||"").toLocaleLowerCase();if(r<n)return-1;if(r>n)return 1}return t.score-e.score}},7298:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultLibraryApplicationAction=function(e,t,r){var a=t.getState(e.id,e.branchId),u=r.getQueuePosition(e.id,e.branchId),o=r.paused;if(null!=a){if(null==u||-1===u)switch(a.type){case i.LocalDispatchApplicationStates.INSTALLING:return i.LibraryApplicationActions.INSTALL;case i.LocalDispatchApplicationStates.UPDATING:case i.LocalDispatchApplicationStates.UPDATE_REQUIRED:return i.LibraryApplicationActions.UPDATE}switch(a.type){case i.LocalDispatchApplicationStates.INSTALLING:case i.LocalDispatchApplicationStates.UPDATING:case i.LocalDispatchApplicationStates.UPDATE_REQUIRED:case i.LocalDispatchApplicationStates.REPAIRING:return u>0?i.LibraryApplicationActions.MOVE_UP:o?i.LibraryApplicationActions.RESUME:i.LibraryApplicationActions.PAUSE;case i.LocalDispatchApplicationStates.UP_TO_DATE:return i.LibraryApplicationActions.PLAY;case i.LocalDispatchApplicationStates.UNINSTALLING:return null}}if(null!=u&&u>0)return i.LibraryApplicationActions.MOVE_UP;if((0,n.isSupportedPlatform)())return i.LibraryApplicationActions.INSTALL;return null};var n=r(300),i=r(1)},7472:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPackAvailableForPurchase=void 0;var n,i=(n=r(4))&&n.__esModule?n:{default:n},a=r(140),u=r(1);t.isPackAvailableForPurchase=function(e){var t=e.store_listing,r=null==t?void 0:t.sku;if(null==r||null==t)return!1;var n=t.unpublished_at;return(0,a.hasFlag)(r.flags,u.SKUFlags.AVAILABLE)&&(null==n||i.default.utc(n).diff(i.default.utc(new Date))>=0)}},7473:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=I(r(5056)),a=I(r(7)),u=I(r(4)),o=I(r(5)),l=I(r(3)),c=I(r(7153)),s=I(r(558)),f=I(r(212)),d=I(r(881)),p=I(r(83)),v=I(r(136)),E=I(r(95)),y=I(r(270)),_=I(r(40)),S=I(r(7564)),g=r(300),h=r(874),m=r(107),A=r(148),T=I(r(14)),k=I(r(45)),P=I(r(356)),L=r(7298),C=r(1);function I(e){return e&&e.__esModule?e:{default:e}}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var R=(0,u.default)().subtract(1,"week"),w=[],N="",O=!1;function M(e,t){return e.application.name.localeCompare(t.application.name,_.default.locale,{sensitivity:"base"})}function U(e,t){return null!=e&&((0,u.default)(e.createdAt).isAfter(R)&&0===t)}var G=((n={})[C.GameTableListKeys.NAME]=M,n[C.GameTableListKeys.PLATFORM]=function(e,t,r){var n=e.libraryApplication.getDistributor(),i=t.libraryApplication.getDistributor();return n===i?(r===C.TableSortDirections.DESCENDING?-1:1)*M(e,t):null==n?1:null==i?-1:n.localeCompare(i)},n[C.GameTableListKeys.LAST_PLAYED]=function(e,t){return e.isNew&&!t.isNew?-1:!e.isNew&&t.isNew?1:e.lastPlayed===t.lastPlayed?0:e.lastPlayed>t.lastPlayed?-1:1},n[C.GameTableListKeys.ACTIONS]=null,n),D=(0,h.cachedFunction)((function(e){return e.filter((function(e){return null!=e.libraryApplication&&e.shouldShowInLibrary}))})),F=(0,h.cachedFunction)((function(e){return e.filter((function(e){return null!=e.libraryApplication&&f.default.isLaunchable(e.libraryApplication.id,e.libraryApplication.branchId)}))})),K=(0,h.cachedFunction)((function(e,t){return e.filter((function(e){return(0,i.default)(t.toLowerCase(),e.application.name.toLowerCase())}))})),j=(0,h.cachedFunction)((function(e,t,r,n){var i=G[t];if(null==i)return e;var a=[].concat(e).sort(i);return r===C.TableSortDirections.DESCENDING?a.reverse():a})),x=(0,h.cachedFunction)((function(e){return e.filter((function(e){return null!=e.libraryApplication&&e.libraryApplication.isHidden()}))}));function H(e,t){var r=P.default.getCurrentUserStatisticsForApplication(e.id);if(null!=r)return new Date(r.last_played_at).getTime();var n=t[e.id];return null!=n?n:0}function q(){var e=new Set(E.default.getRunningVerifiedApplicationIds()),t={},r=new Set,n=E.default.getGamesSeen(!1,!1).map((function(e){var r=p.default.getGameBySettingGame(e);return null!=r?(t[r.id]=1e3*e.lastFocused,r.id):null})),i=Object.values(v.default.getAllLibraryApplications()).map((function(n){return function(e,t,r,n,i){if(!i&&t.has(e.id))return null;var a=p.default.getGame(e.id);if(null==a)return null;var u=H(a,r);return t.add(e.id),(0,A.isUserEntitledToLibraryApplication)(e)||f.default.isInstalled(e.id,e.branchId)?{key:e.id+"-"+e.branchId,application:a,libraryApplication:e,lastPlayed:u,supportsCloudSync:null!=e&&f.default.supportsCloudSync(e.id,e.branchId),isNew:U(e,u),isLaunching:c.default.launchingGames.has(e.id),isRunning:n.has(e.id),isLaunchable:(0,g.isLaunchable)(v.default,c.default,f.default,s.default,e.id,e.branchId),isUpdatingFlags:v.default.isUpdatingFlags(e.id,e.branchId),shouldShowInLibrary:(0,A.shouldShowGameInLibrary)(a,e,y.default),defaultAction:(0,L.getDefaultLibraryApplicationAction)(e,f.default,d.default)}:null}(n,r,t,e,!0)})).filter(m.isNotNullish),u=n.map((function(n){return function(e,t,r,n){var i=null!=e?p.default.getGame(e):null;if(null==i||null==e||t.has(e))return null;var a=H(i,r);return t.add(e),{key:e,application:i,lastPlayed:a,supportsCloudSync:!1,isNew:!1,isLaunching:c.default.launchingGames.has(e),isRunning:n.has(e),isLaunchable:(0,g.isLaunchable)(v.default,c.default,f.default,s.default,e,null),isUpdatingFlags:!1,shouldShowInLibrary:!1,libraryApplication:null,defaultAction:null}}(n,r,t,e)})).filter(m.isNotNullish),o=[].concat(u,i).sort((function(e,t){return e.lastPlayed===t.lastPlayed?0:e.lastPlayed>t.lastPlayed?-1:1}));return O=null!=p.default.lastFetched&&v.default.fetched,!a.default.isEqual(o,w)&&(w=o,T.default.embedded&&k.default.setSystemTrayApplications(F(w).map((function(e){return e.application})).slice(0,5)),!0)}var V=new(function(e){var t,r,n,i,a;function u(){return e.apply(this,arguments)||this}return r=e,(t=u).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,u.prototype.initialize=function(){this.syncWith([p.default,c.default,E.default,f.default,d.default,v.default,P.default,y.default,s.default],q,200),this.syncWith([S.default,_.default],(function(){return!0}))},n=u,(i=[{key:"applicationFilterQuery",get:function(){return N}},{key:"applicationViewItems",get:function(){return w}},{key:"launchableApplicationViewItems",get:function(){return F(w)}},{key:"libraryApplicationViewItems",get:function(){return D(w)}},{key:"filteredLibraryApplicationViewItems",get:function(){return K(this.libraryApplicationViewItems,N)}},{key:"sortedFilteredLibraryApplicationViewItems",get:function(){return j(this.filteredLibraryApplicationViewItems,S.default.sortKey,S.default.sortDirection,_.default.locale)}},{key:"hiddenLibraryApplicationViewItems",get:function(){return x(w)}},{key:"hasFetchedApplications",get:function(){return O}}])&&b(n.prototype,i),a&&b(n,a),u}(o.default.Store))(l.default,{LIBRARY_APPLICATION_FILTER_UPDATE:function(e){var t=e.query;N=t}});t.default=V},7564:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(r(7)),i=l(r(5)),a=l(r(26)),u=l(r(3)),o=r(1);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,f=o.TableSortDirections.ASCENDING,d=o.GameTableListKeys.LAST_PLAYED,p=!1,v=n.default.debounce((function(){p=!1,E.emitChange()}),200);var E=new(function(e){var t,r,n,i,u;function o(){return e.apply(this,arguments)||this}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.prototype.initialize=function(){var e=a.default.get("GameLibraryViewStore")||{};null!=e.sortDirection&&null!=e.sortKey&&(f=e.sortDirection,d=e.sortKey)},n=o,(i=[{key:"sortDirection",get:function(){return f}},{key:"sortKey",get:function(){return d}},{key:"activeRowKey",get:function(){return s}},{key:"isNavigatingByKeyboard",get:function(){return p}}])&&c(n.prototype,i),u&&c(n,u),o}(i.default.Store))(u.default,{LIBRARY_TABLE_SORT_UPDATE:function(e){var t=e.direction,r=e.key;f=t,d=r,a.default.set("GameLibraryViewStore",{sortDirection:f,sortKey:d})},LIBRARY_TABLE_ACTIVE_ROW_ID_UPDATE:function(e){var t=e.key;e.isKeyboardEvent&&(p=!0,v()),s=t}}),y=E;t.default=y},7864:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(7473)),i=a(r(6));function a(e){return e&&e.__esModule?e:{default:e}}var u={MENTION_EVERYONE:function(){return{test:"everyone",text:"@everyone",description:i.default.Messages.MENTION_EVERYONE_AUTOCOMPLETE_DESCRIPTION}},MENTION_HERE:function(){return{test:"here",text:"@here",description:i.default.Messages.MENTION_HERE_AUTOCOMPLETE_DESCRIPTION}},LAUNCHABLE_APPLICATIONS:function(){return n.default.launchableApplicationViewItems}};t.default=u}}]);
//# sourceMappingURL=0fa7d8a45acf94901e62.js.map